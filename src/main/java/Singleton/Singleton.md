# 单例模式

[TOC]

## 概述

确保一个类在任何情况下只有一个实例，并提供一个全局访问点，隐藏其所有构造方法

应用： `ApplicatonContext` `DBPool` `ServletConfig`



## 常见写法

### 饿汉式

单例类首次加载时就创建实例 

缺点： 类加载时就创建实例，会造成空间浪费

### 懒汉式

单例类在使用时才创建实例

缺点：创建实例时需要考虑线程安全问题，性能没有饿汉式好

### 静态内部类式

### 注册式

#### 枚举实现单例

通过枚举实现单例

#### 容器实现单例

把需要用到的实例放在Map容器中，用到的时候取出



### ThreadLocal单例

可以保证在线程内是单例的



## 破坏单例的方法

1. 通过反射获取单例的构造方法，创建实例
2. 通过将单例序列化再反序列化后，也会破坏单例 （可以在单例内添加`readResolve`方法解决）



